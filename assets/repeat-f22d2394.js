import{w as k}from"./lit-html-b1a28dc3.js";import{e as A,i as b,t as j}from"./directive-12249aa5.js";import{p as C,v as p,r as v,h as x,m as D}from"./directive-helpers-7e9c1cf5.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const g=(s,c,h)=>{const d=new Map;for(let e=c;e<=h;e++)d.set(s[e],e);return d},L=A(class extends b{constructor(s){if(super(s),s.type!==j.CHILD)throw Error("repeat() can only be used in text expressions")}ht(s,c,h){let d;h===void 0?h=c:c!==void 0&&(d=c);const e=[],i=[];let l=0;for(const f of s)e[l]=d?d(f,l):l,i[l]=h(f,l),l++;return{values:i,keys:e}}render(s,c,h){return this.ht(s,c,h).values}update(s,[c,h,d]){const e=C(s),{values:i,keys:l}=this.ht(c,h,d);if(!Array.isArray(e))return this.dt=l,i;const f=this.dt??(this.dt=[]),u=[];let m,$,t=0,o=e.length-1,r=0,n=i.length-1;for(;t<=o&&r<=n;)if(e[t]===null)t++;else if(e[o]===null)o--;else if(f[t]===l[r])u[r]=p(e[t],i[r]),t++,r++;else if(f[o]===l[n])u[n]=p(e[o],i[n]),o--,n--;else if(f[t]===l[n])u[n]=p(e[t],i[n]),v(s,u[n+1],e[t]),t++,n--;else if(f[o]===l[r])u[r]=p(e[o],i[r]),v(s,e[t],e[o]),o--,r++;else if(m===void 0&&(m=g(l,r,n),$=g(f,t,o)),m.has(f[t]))if(m.has(f[o])){const a=$.get(l[r]),y=a!==void 0?e[a]:null;if(y===null){const w=v(s,e[t]);p(w,i[r]),u[r]=w}else u[r]=p(y,i[r]),v(s,e[t],y),e[a]=null;r++}else x(e[o]),o--;else x(e[t]),t++;for(;r<=n;){const a=v(s,u[n+1]);p(a,i[r]),u[r++]=a}for(;t<=o;){const a=e[t++];a!==null&&x(a)}return this.dt=l,D(s,u),k}});export{L as c};
